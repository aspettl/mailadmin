import e from"morphdom";const t=new WeakMap;function findSubmitterFromClickTarget(e){const t=e instanceof Element?e:e instanceof Node?e.parentElement:null;const n=null!=t?t.closest("input, button"):null;return null!=n&&"submit"===n.type?n:null}function clickCaptured(e){const n=findSubmitterFromClickTarget(e.target);null!=(null===n||void 0===n?void 0:n.form)&&t.set(n.form,n)}(function(){let e=Event.prototype;const n=navigator.vendor.includes("Apple Computer");if("SubmitEvent"in window){if(!n)return;e=window.SubmitEvent.prototype}if(!("submitter"in e)){addEventListener("click",clickCaptured,true);Object.defineProperty(e,"submitter",{get(){if("submit"===this.type&&this.target instanceof HTMLFormElement)return t.get(this.target)}})}})();var n;function toArray(e){return Array.isArray(e)?e:null!=Array.from?Array.from(e):[].slice.call(e)}const r=null!==(n=Element.prototype.matches)&&void 0!==n?n:Element.prototype.webkitMatchesSelector;function matches$1(e,t){return e instanceof Element&&("string"===typeof t?r.call(e,t):r.call(e,t.selector)&&!r.call(e,t.exclude))}let o="form";let i="a";if(null!=window.Turbo){o='form[data-turbo="false"]';i='a[data-turbo="false"]'}const a="data-";const s=`${a}remote`;const c=`${a}method`;const l=`${a}confirm`;const u=`${a}disable`;const d=`${u}-with`;const m={remoteSelector:`a[${s}="true"], a[${c}], form[${s}="true"]`,linkClickSelector:`a[${l}], ${i}[${c}], ${i}[${s}]:not([disabled]), ${i}[${d}], ${i}[${u}]`,buttonClickSelector:{selector:`button[${s}]:not([form]), button[${l}]:not([form]), button[${d}]:not([form]), button[${u}]:not([form])`,exclude:"form button"},inputChangeSelector:`select[${s}], input[${s}], textarea[${s}]`,formSubmitSelector:`${o}`,formInputClickSelector:"form input[type=submit], form input[type=image], form button[type=submit], form button:not([type]), input[type=submit][form], input[type=image][form], button[type=submit][form], button[form]:not([type])",formDisableSelector:`input[${d}]:enabled, button[${d}]:enabled, textarea[${d}]:enabled, input[${u}]:enabled, button[${u}]:enabled, textarea[${u}]:enabled`,formEnableSelector:`input[${d}]:disabled, button[${d}]:disabled, textarea[${d}]:disabled, input[${u}]:disabled, button[${u}]:disabled, textarea[${u}]:disabled`,linkDisableSelector:`a[${d}], a[${u}]`,buttonDisableSelector:`button[data-remote][${d}], button[data-remote][${u}]`,fileInputSelector:"fileInputSelector: 'input[name][type=file]:not([disabled])'"};function addListeners(e,t){e.forEach((e=>{const{selectors:n,event:r}=e;const o=n.map(selectorToString).join(", ");$$1(o).forEach((e=>{n.forEach((n=>{matches$1(e,n)&&t.forEach((t=>e.addEventListener(r,t)))}))}))}))}function removeListeners(e,t){e.forEach((e=>{const{selectors:n,event:r}=e;const o=n.map(selectorToString).join(", ");$$1(o).forEach((e=>{n.forEach((n=>{matches$1(e,n)&&t.forEach((t=>e.removeEventListener(r,t)))}))}))}))}function attachObserverCallback(e,t,n){e.forEach((e=>{e.selectors.forEach((r=>{t.forEach((t=>{matches$1(t,r)&&n.forEach((n=>t.addEventListener(e.event,n)));t instanceof Element&&t.querySelectorAll(selectorToString(r)).forEach((t=>{n.forEach((n=>t.addEventListener(e.event,n)))}))}))}))}))}function formElements$1(e,t){return matches$1(e,"form")?Array.from(e.elements).filter((e=>matches$1(e,t))):toArray(e.querySelectorAll(selectorToString(t)))}function $$1(e){return toArray(document.querySelectorAll(e))}function selectorToString(e){let t;t="string"===typeof e?e:e.selector;return t}const f={bubbles:true,cancelable:true};function dispatch(e,t={}){const n=new CustomEvent(e,{...f,...t});this.dispatchEvent(n);return n}function fire$1(e,t,n={}){const r=dispatch.call(e,t,n);return!r.defaultPrevented}function stopEverything$1(e){null!=e.target&&fire$1(e.target,"ujs:everythingStopped");e.stopPropagation();e.stopImmediatePropagation();e.preventDefault()}const h="ajax";const b={ajaxBefore:`${h}:before`,ajaxBeforeSend:`${h}:beforeSend`,ajaxSend:`${h}:send`,ajaxResponseError:`${h}:response:error`,ajaxRequestError:`${h}:request:error`,ajaxSuccess:`${h}:success`,ajaxError:`${h}:error`,ajaxComplete:`${h}:complete`,ajaxStopped:`${h}:stopped`,ajaxBeforeNavigation:`${h}:beforeNavigation`};function delegate$1(e,t,n,r){e.addEventListener(n,(e=>{let n=e.target;while(!(!(n instanceof Element)||matches$1(n,t)))n=n.parentNode;if(n instanceof Element&&false===r.call(n,e)){e.preventDefault();e.stopPropagation()}}))}function findSubmitter(e){var t;return e.submitter instanceof HTMLElement?e.submitter:null===(t=e.detail)||void 0===t?void 0:t.submitter}function expandUrl(e){return new URL(e.toString(),document.baseURI)}function urlsAreEqual(e,t){return expandUrl(e).href===expandUrl(t).href}function mergeHeaders(...e){const t={};for(const n of e)for(const[e,r]of n)t[e]=r;return new Headers(t)}function isGetRequest(e){return"get"===e.toLowerCase()}function FetchResponse$1(e){let t;let n;const r=e.ok;const o=e.status;const i=!r;const a=e.status>=400&&e.status<=499;const s=e.status>=500&&e.status<=599;const c=e.redirected;const l=expandUrl(e.url);const u=getHeader("content-type");const d=Boolean(null===u||void 0===u?void 0:u.match(/^(?:text\/([^\s;,]+\b)?html|application\/xhtml\+xml)\b/));const m=Boolean(null===u||void 0===u?void 0:u.toLowerCase().match(/(^application\/json|\.json)/));async function text(){if(null!=t)return t;t=await e.clone().text();return t}async function html(){return d?await text():await Promise.reject(e)}async function json(){if(m){if(null!=n)return n;n=JSON.parse(await text());return n}return await Promise.reject(e)}function getHeader(t){return e.headers.get(t)}return{succeeded:r,failed:i,redirected:c,clientError:a,serverError:s,location:l,contentType:u,getHeader:getHeader,isHtml:d,isJson:m,text:text,html:html,json:json,response:e,status:o}}function buildFormElementFormData(e,t){const n=new FormData(e);let r;let o;if(null!=t){r=t.getAttribute("name");o=t.getAttribute("value")}null!=r&&null!=o&&n.get(r)!==o&&n.append(r,o);return n}const p={urlEncoded:"application/x-www-form-urlencoded",multipart:"multipart/form-data",plain:"text/plain"};function formEnctypeFromString(e){switch(e.toLowerCase()){case p.multipart:return p.multipart;case p.plain:return p.plain;default:return p.urlEncoded}}function formDataToStrings(e){return[...e].reduce(((e,[t,n])=>e.concat("string"===typeof n?[[t,n]]:[])),[])}function urlEncodeFormData(e){return new URLSearchParams(formDataToStrings(e))}const v={"*":"*/*",any:"*/*",text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript",script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"};function findResponseTypeHeader(e){var t,n,r;const o=null!==(n=null===(t=window.mrujs)||void 0===t?void 0:t.mimeTypes)&&void 0!==n?n:v;const i={...o};if(null==e)return null!==(r=null===i||void 0===i?void 0:i.any)&&void 0!==r?r:"*/*";e=e.trim();null!=i&&Object.keys(i).includes(e)&&(e=i[e]);return e.includes("*/*")?e:`${e}, */*; q=0.01`}function isInsignificantClick(e){return null!=e.target&&e.target.isContentEditable||e.defaultPrevented||e.button>0||e.altKey||e.ctrlKey||e.metaKey||e.shiftKey}function isSignificantClick(e){return!isInsignificantClick(e)}function preventInsignificantClick$1(e){isSignificantClick(e)||stopEverything$1(e)}function getCookieValue(e){if(null!=e){const t=""!==document.cookie.trim()?document.cookie.split("; "):[];const n=t.find((t=>t.startsWith(e)));if(null!=n){const e=n.split("=").slice(1).join("=");return""!==e.trim()?decodeURIComponent(e):void 0}}}function getMetaContent(e){var t;const n=$$1(`meta[name="${e}"]`);const r=n[n.length-1];return null!==(t=null===r||void 0===r?void 0:r.content)&&void 0!==t?t:void 0}function Csrf(){return{name:"Csrf",connect:connect$3,disconnect:disconnect$3,observerCallback:observerCallback}}function connect$3(){refreshCSRFTokens$1()}function disconnect$3(){}function observerCallback(e){for(let t=0;t<e.length;t++){const n=e[t];isCsrfToken(n)&&refreshCSRFTokens$1()}}function refreshCSRFTokens$1(){const e=csrfToken$1();const t=csrfParam$1();null!=e&&null!=t&&$$1(`form input[name="${t}"]`).forEach((t=>{const n=t;n.value=e}))}function isCsrfToken(e){return e instanceof HTMLMetaElement&&e.matches('meta[name="csrf-token]"')}function csrfToken$1(){var e;return null!==(e=getCookieValue(csrfParam$1()))&&void 0!==e?e:getMetaContent("csrf-token")}function csrfParam$1(){return getMetaContent("csrf-param")}function CSRFProtection$1(e){const t=csrfToken$1();const n="X-CSRF-TOKEN";null!=t&&null==e.headers.get(n)&&e.headers.set("X-CSRF-TOKEN",t)}function FetchRequest$1(e,t={}){const n=new AbortController;const r=n.signal;let o;let i;let a="get";let s;let c=false;a=getMethod$1(t);c=isGetRequest(a);const l=getBody$2(t);if(e instanceof Request){i=getUrl(e.url,c,l);s=createRequestFromRequest(e)}else{i=getUrl(e,c,l);s=createRequestFromLocateable()}c||CSRFProtection$1(s);o=s.headers;const u=i.searchParams;return{request:s,method:a,url:i,body:l,params:u,abortController:n,abortSignal:r,cancel:cancel,headers:o,isGetRequest:c};function defaultHeaders(){const e=new Headers({Accept:"*/*","X-REQUESTED-WITH":"XmlHttpRequest"});return e}function cancel(e){n.abort();if(null!=e){stopEverything$1(e);const{element:t}=e.detail;dispatch.call(t,b.ajaxStopped,{detail:{...e.detail}})}}function createRequestFromRequest(e){o=mergeHeaders(defaultHeaders(),e.headers);const t={...defaultRequestOptions(),...e};c&&delete t.body;return new Request(i,t)}function createRequestFromLocateable(){o=mergeHeaders(defaultHeaders(),new Headers(t.headers));const e={...defaultRequestOptions(),...t};e.headers=o;c&&delete e.body;return new Request(i,e)}function defaultRequestOptions(){const e={method:a,headers:o,credentials:"same-origin",redirect:"follow",signal:r};if(c)return e;e.body=l;return e}}function getUrl(e,t,n){const r=expandUrl(e);return t?mergeFormDataEntries(r,entries(n)):r}function entries(e){return e instanceof URLSearchParams?Array.from(e.entries()):[]}function getBody$2(e){var t;return null!==(t=e.body)&&void 0!==t?t:new URLSearchParams}function getMethod$1(e){var t,n;return null!==(n=null===(t=e.method)||void 0===t?void 0:t.toLowerCase())&&void 0!==n?n:"get"}function mergeFormDataEntries(e,t){const n=new URLSearchParams(e.search);for(const[r,o]of t)if(!(o instanceof File)&&"authenticity_token"!==r)if(n.has(r)){n.delete(r);e.searchParams.set(r,o)}else e.searchParams.append(r,o);return e}function FormSubmission(e,t){const n=expandUrl(getAction(e,t));const r=getOptions(e,t);const o=FetchRequest$1(n,r);const i=o.request;return{fetchRequest:o,request:i,element:e,submitter:t}}function getOptions(e,t){const n=getMethod(e,t);const r=getHeaders$1(e);const o={method:n,headers:r};o.body=getBody$1(e,n,t);return o}function getHeaders$1(e){let t;null!=e&&(t=e.dataset.type);const n=findResponseTypeHeader(t);const r=new Headers({Accept:n});r.set("Accept",n);return r}function getFormData$1(e,t){return buildFormElementFormData(e,t)}function getMethod(e,t){var n,r;const o=null!==(r=null!==(n=null===t||void 0===t?void 0:t.getAttribute("formmethod"))&&void 0!==n?n:e.getAttribute("method"))&&void 0!==r?r:"get";return o.toLowerCase()}function getAction(e,t){var n,r;const o=null!==(r=null!==(n=null===t||void 0===t?void 0:t.getAttribute("formaction"))&&void 0!==n?n:e.getAttribute("action"))&&void 0!==r?r:"";return o}function getBody$1(e,t,n){const r=getFormData$1(e,n);return getEncType(e,n)===p.urlEncoded||isGetRequest(t)?urlEncodeFormData(r):r}function getEncType(e,t){var n,r;const o=e.getAttribute("enctype");const i=null!==(r=null!==(n=null===t||void 0===t?void 0:t.getAttribute("formenctype"))&&void 0!==n?n:o)&&void 0!==r?r:p.urlEncoded;const a=formEnctypeFromString(i);return a}function ElementDisabler(){const e=[disableElement$1];let t=[];function initialize(){t=getQueries$5()}function connect(){addListeners(t,e)}function disconnect(){removeListeners(t,e)}function observerCallback(n){attachObserverCallback(t,n,e)}return{name:"ElementDisabler",initialize:initialize,connect:connect,disconnect:disconnect,observerCallback:observerCallback,queries:t}}function getQueries$5(){const{formSubmitSelector:e,linkClickSelector:t,buttonClickSelector:n,inputChangeSelector:r}=window.mrujs;return[{event:"click",selectors:[n,t]},{event:"ajax:send",selectors:[e]},{event:"turbo:submit-start",selectors:["form"]},{event:"change",selectors:[r]}]}function disableElement$1(e){let t;t=e instanceof Event?e.target:e;if(null==t)return;const{linkDisableSelector:n,buttonDisableSelector:r,formDisableSelector:o,formSubmitSelector:i}=window.mrujs;matches$1(t,n)?disableLinkElement(t):matches$1(t,r)||matches$1(t,o)?disableFormElement(t):matches$1(t,i)&&disableFormElements(t)}function disableFormElements(e){formElements$1(e,window.mrujs.formDisableSelector).forEach((e=>disableFormElement(e)))}function disableFormElement(e){if(null!=e.dataset.ujsDisabled)return;const t=e.getAttribute("data-disable-with");if(null!=t)if(matches$1(e,"button")){e.dataset.ujsEnableWith=e.innerHTML;e.innerHTML=t}else{e.dataset.ujsEnableWith=e.value;e.value=t}e.dataset.ujsDisabled="true";setTimeout((()=>{e.disabled=true}))}function disableLinkElement(e){if(null!=e.dataset.ujsDisabled)return;const t=e.dataset.disableWith;if(null!=t){e.dataset.ujsEnableWith=e.innerHTML;e.innerHTML=t}e.addEventListener("click",stopEverything$1);e.dataset.ujsDisabled="true"}function FormSubmitDispatcher(){return{name:"FormSubmitDispatcher",connect:connect$2,disconnect:disconnect$2}}function connect$2(){attachListeners("addEventListener")}function disconnect$2(){attachListeners("removeEventListener")}function startFormSubmission(e){if(e.defaultPrevented)return;const t=findTarget(e);const n=findSubmitter(e);if("true"!==t.dataset.remote)return;if(shouldNotSubmit(t))return;if(shouldNotSubmit(n))return;null!=n&&disableElement$1(n);e.preventDefault();const{fetchRequest:r,request:o}=FormSubmission(t,n);const i={element:t,fetchRequest:r,request:o,submitter:n};dispatch.call(t,b.ajaxBefore,{detail:i})}function startFetchRequest(e){const{element:t,fetchRequest:n,request:r,submitter:o}=e.detail;e.defaultPrevented||shouldNotSubmit(t)||shouldNotSubmit(o)?dispatchStopped(e):dispatch.call(t,b.ajaxBeforeSend,{detail:{element:t,fetchRequest:n,request:r,submitter:o}})}function sendFetchRequest(e){const{element:t,request:n,submitter:r}=e.detail;if(e.defaultPrevented||shouldNotSubmit(t)||shouldNotSubmit(r))dispatchStopped(e);else{dispatch.call(t,b.ajaxSend,{detail:{...e.detail}});window.fetch(n).then((t=>{const n=FetchResponse$1(t);const{response:r}=n;dispatchResponse({...e.detail,fetchResponse:n,response:r})})).catch((t=>dispatchRequestError({...e.detail,error:t})))}}function dispatchComplete(e){e.defaultPrevented?dispatchStopped(e):dispatch.call(findTarget(e),b.ajaxComplete,{detail:{...e.detail}})}function dispatchResponse({element:e,fetchRequest:t,request:n,fetchResponse:r,response:o,submitter:i}){const a=null===o||void 0===o?void 0:o.status;true!==(null===r||void 0===r?void 0:r.succeeded)?dispatch.call(e,b.ajaxResponseError,{detail:{element:e,fetchRequest:t,request:n,fetchResponse:r,response:o,submitter:i,status:a}}):dispatch.call(e,b.ajaxSuccess,{detail:{element:e,fetchRequest:t,request:n,fetchResponse:r,response:o,submitter:i,status:a}})}function dispatchRequestError({element:e,fetchRequest:t,request:n,error:r,submitter:o}){dispatch.call(e,b.ajaxRequestError,{detail:{element:e,fetchRequest:t,request:n,error:r,submitter:o}})}function dispatchError(e){e.defaultPrevented?dispatchStopped(e):dispatch.call(findTarget(e),b.ajaxError,{detail:{...e.detail}})}function dispatchStopped(e){dispatch.call(findTarget(e),b.ajaxStopped,{detail:{...e.detail}})}function attachListeners(e){document[e]("submit",startFormSubmission);document[e](b.ajaxBefore,startFetchRequest);document[e](b.ajaxBeforeSend,sendFetchRequest);document[e](b.ajaxSuccess,dispatchComplete);document[e](b.ajaxRequestError,dispatchError);document[e](b.ajaxResponseError,dispatchError);document[e](b.ajaxError,dispatchComplete)}function findTarget(e){return e.target}function shouldNotSubmit(e){return"false"===(null===e||void 0===e?void 0:e.dataset.ujsSubmit)}function RemoteWatcher(){let e;function initialize(){e=window.mrujs.remoteSelector}function connect(){$$1(e).forEach((e=>{addTurboFalse(e)}))}function disconnect(){}function observerCallback(t){t.forEach((t=>{matches$1(t,window.mrujs.remoteSelector)&&addTurboFalse(t);t instanceof Element&&t.querySelectorAll(e).forEach((e=>{addTurboFalse(e)}))}))}return{name:"RemoteWatcher",initialize:initialize,connect:connect,disconnect:disconnect,observerCallback:observerCallback}}function addTurboFalse(e){null!=e&&null==e.getAttribute("data-turbo")&&e.setAttribute("data-turbo","false")}function ClickHandler(){const e=[preventInsignificantClick$1];let t=[];function initialize(){t=getQueries$4()}function connect(){addListeners(t,e)}function disconnect(){removeListeners(t,e)}function observerCallback(n){attachObserverCallback(t,n,e)}return{name:"ClickHandler",initialize:initialize,connect:connect,disconnect:disconnect,observerCallback:observerCallback,queries:t,callbacks:e}}function getQueries$4(){const{linkClickSelector:e,buttonClickSelector:t,formInputClickSelector:n}=window.mrujs;return[{event:"click",selectors:[e,t,n]}]}function Confirm(){const e=[handleConfirm$1];let t=[];function initialize(){t=getQueries$3()}function connect(){addListeners(t,e)}function disconnect(){removeListeners(t,e)}function observerCallback(n){attachObserverCallback(t,n,e)}return{name:"Confirm",initialize:initialize,connect:connect,disconnect:disconnect,observerCallback:observerCallback,queries:t,callbacks:e}}function handleConfirm$1(e){allowAction(e)||stopEverything$1(e)}function allowAction(e){if(null==e.currentTarget)return true;const t=e.currentTarget;const n=t.dataset.confirm;if(null==n)return true;let r=false;try{r=window.mrujs.confirm(n)}catch(e){console.warn('The following error was encountered when calling: "mrujs.confirm"\n\n');console.error(e)}const o=dispatch.call(t,"confirm:complete",{detail:{answer:r}});return r&&!o.defaultPrevented}function getQueries$3(){const{linkClickSelector:e,buttonClickSelector:t,formInputClickSelector:n,inputChangeSelector:r,formSubmitSelector:o}=window.mrujs;return[{event:"click",selectors:[e,t,n]},{event:"change",selectors:[r]},{event:"submit",selectors:[o]}]}function MethodSubmission(e){var t,n;const r=getElementMethod(e);let o;(null===(t=window.mrujs)||void 0===t?void 0:t.maskLinkMethods)&&(o=getMaskedMethod(r));const i=null!==(n=e.getAttribute("href"))&&void 0!==n?n:e.dataset.url;if(null==i)throw Error(`No 'href' or 'data-url' found on ${JSON.stringify(e)}`);const a=expandUrl(i);const s={headers:getHeaders(e)};s.method=null!==o&&void 0!==o?o:r;isGetRequest(r)||(s.body=getBody(r,e));const c=FetchRequest$1(a,s);return{request:c.request,fetchRequest:c}}function getHeaders(e){let t;null!=e&&(t=e.dataset.type);const n=findResponseTypeHeader(t);const r=new Headers({Accept:n});r.set("Accept",n);return r}function getFormData(e){var t;const n=new FormData;(null===(t=window.mrujs)||void 0===t?void 0:t.maskLinkMethods)&&n.append("_method",e);return n}function getElementMethod(e){var t;const n=null!==(t=e.dataset.method)&&void 0!==t?t:"get";return n.toLowerCase()}function getMaskedMethod(e){return isGetRequest(e)?"get":"post"}function getBody(e,t){const n=urlEncodeFormData(getFormData(e));const r=t.getAttribute("name");const o=t.value;null!=r&&null!=o&&n.append(r,o);const i=parseParams(t.getAttribute("data-params"));if(null==i)return n;for(const[e,t]of i){if(null==t)continue;const r=t.toString();const o="string"===typeof r||r instanceof String;o&&n.append(e,r.toString())}return n}function parseParams(e){if(null!=e){containsEncodedComponents(e)&&(e=decodeURIComponent(e));try{return Object.entries(JSON.parse(e))}catch(e){}try{return new URLSearchParams(e).entries()}catch(e){}}}function containsEncodedComponents(e){return decodeURI(e)!==decodeURIComponent(e)}function Method(){const e=[handleMethod$1];let t=[];function initialize(){t=getQueries$2()}function connect(){addListeners(t,e)}function disconnect(){removeListeners(t,e)}function observerCallback(n){attachObserverCallback(t,n,e)}return{name:"Method",initialize:initialize,connect:connect,disconnect:disconnect,observerCallback:observerCallback,queries:t,callbacks:e}}function handleMethod$1(e){var t;const n=e.currentTarget;if("false"===n.dataset.remote)return;if(null==n.dataset.method&&"true"!==n.dataset.remote)return;const r=null!==(t=n.getAttribute("href"))&&void 0!==t?t:n.dataset.url;if(null==r)return;e.preventDefault();const o=e.target;const i=MethodSubmission(n);const{fetchRequest:a,request:s}=i;dispatch.call(n,b.ajaxBeforeSend,{detail:{element:n,fetchRequest:a,request:s,submitter:o}})}function getQueries$2(){const{linkClickSelector:e,inputChangeSelector:t,buttonClickSelector:n}=window.mrujs;return[{event:"click",selectors:[e,n]},{event:"change",selectors:[t]}]}const g=["advance","replace","restore"];function NavigationAdapter(){const e={name:"NavigationAdapter",connect:connect$1,disconnect:disconnect$1,cacheContains:cacheContains,cacheHTML:cacheHTML,prefetch:prefetch,navigate:navigate};Object.defineProperties(e,{adapter:{get:function(){return findAdapter()}},snapshotCache:{get:function(){return findSnapshotCache(findAdapter())}}});return e}function connect$1(){document.addEventListener("ajax:complete",beforeNavigation);document.addEventListener("ajax:beforeNavigation",navigateViaEvent)}function disconnect$1(){document.removeEventListener("ajax:complete",beforeNavigation);document.removeEventListener("ajax:beforeNavigation",navigateViaEvent)}function beforeNavigation(e){e.defaultPrevented||dispatch.call(e.detail.element,"ajax:beforeNavigation",{detail:{...e.detail}})}function findAdapter(){return useTurbolinks()?window.Turbolinks:useTurbo()?window.Turbo:void 0}function useTurbolinks(){return null!=window.Turbolinks&&true===window.Turbolinks.supported}function useTurbo(){return null!=window.Turbo}async function prefetch(e){const t=expandUrl(e);const n=await window.mrujs.fetch(t,{method:"get"});if(null==n)return;const r=FetchResponse$1(n);if(!r.isHtml)return;const o=await r.html();cacheHTML({html:o,url:e})}function cacheHTML({html:e,url:t}){const n=expandUrl(t);const r=generateSnapshotFromHtml(e);putSnapshotInCache(n,r)}function findSnapshotCache(e){if(null!=e)return useTurbolinks()?e.controller.cache:useTurbo()?e.navigator.view.snapshotCache:void 0}function cacheContains(e){var t;const n=expandUrl(e);const r=findSnapshotCache(findAdapter());return null!==(t=null===r||void 0===r?void 0:r.has(n))&&void 0!==t&&t}function navigateViaEvent(e){if(e.defaultPrevented)return;const{element:t,fetchResponse:n,fetchRequest:r}=e.detail;shouldNavigate(t,n)&&navigate(t,r,n)}function shouldNavigate(e,t){if("false"===e.dataset.ujsNavigate)return false;if(null==t)return false;if(!t.isHtml)return false;if(e instanceof HTMLFormElement&&t.succeeded&&!t.redirected){console.error("Successful form submissions must redirect");return false}return true}function navigate(e,t,n,r){r=null!==r&&void 0!==r?r:determineAction(e);let o=expandUrl(window.location.href);(null===t||void 0===t?void 0:t.isGetRequest)&&(o=t.url);n.redirected&&(o=n.location);const i=window.location.href;const a=urlsAreEqual(o,i);let s="morphdom";"turbo"!==window.mrujs.errorRenderer&&"turbo"!==e.getAttribute("data-ujs-error-renderer")||(s="turbo");const c=e.getAttribute("data-ujs-morph");const l=findAdapter();if(n.failed||a||null==l||"true"===c)morphResponse(e,n,!a,s);else{l.clearCache();preventDoubleVisit(n,o,r)}}function putSnapshotInCache(e,t){if(""===t)return;const n=findSnapshotCache(findAdapter());null===n||void 0===n?void 0:n.put(expandUrl(e),t)}function generateSnapshotFromHtml(e){var t,n,r;const o=findAdapter();return null==o?"":useTurbolinks()?null!==(t=o.Snapshot.wrap(e))&&void 0!==t?t:"":useTurbo()&&canSnapshot()&&null!==(r=null===(n=o.PageSnapshot)||void 0===n?void 0:n.fromHTMLString(e))&&void 0!==r?r:""}function canSnapshot(){const e=findAdapter();if(null==e)return false;if(useTurbolinks())return true;if(useTurbo()){if(null==e.PageSnapshot){console.warn("The version of Turbo you are currently using does not support snapshot generation. Please consider upgrading your version of Turbo.");return false}return true}return false}function preventDoubleVisit(e,t,n){const r=findAdapter();null!=r&&e.html().then((e=>{cacheHTML({html:e,url:t});n="restore";r.visit(t,{action:n})})).catch((e=>console.error(e)))}function morphResponse(e,t,n=false,r="morphdom"){t.isHtml&&t.html().then((o=>{var i;if("turbo"===r)renderError(o);else if("morphdom"===r){const t=e.getAttribute("data-ujs-morph-root");let n=document.documentElement;null!=t&&(n=""===t.trim()?e:null!==(i=document.querySelector(t))&&void 0!==i?i:document.documentElement);morphHtml(o,n)}n&&window.history.pushState({},"",t.location)})).catch((e=>{console.error(e)}))}function morphHtml(t,n=document.documentElement){const r=document.createElement("template");r.innerHTML=String(t).trim();const o=n===document.documentElement?r.innerHTML:r.content;document.dispatchEvent(new CustomEvent("ujs:beforeMorph"));e(n,o,{childrenOnly:true});document.dispatchEvent(new CustomEvent("ujs:afterMorph"))}function renderError(e){const t=findAdapter();null===t||void 0===t?void 0:t.navigator.view.renderError(generateSnapshotFromHtml(e))}function determineAction(e){var t,n;let r=null!==(n=null!==(t=e.dataset.turbolinksAction)&&void 0!==t?t:e.dataset.turboAction)&&void 0!==n?n:"advance";g.includes(r)||(r="advance");return r}function DisabledElementChecker(){const e=[handleDisabledElement$1];let t=[];function initialize(){t=getQueries$1()}function connect(){addListeners(t,e)}function disconnect(){removeListeners(t,e)}function observerCallback(n){attachObserverCallback(t,n,e)}return{name:"DisabledElementChecker",initialize:initialize,connect:connect,disconnect:disconnect,observerCallback:observerCallback,queries:t,callbacks:e}}function getQueries$1(){const{linkClickSelector:e,buttonClickSelector:t,inputChangeSelector:n,formSubmitSelector:r,formInputClickSelector:o}=window.mrujs;return[{event:"click",selectors:[t,e,o]},{event:"change",selectors:[n]},{event:"submit",selectors:[r]}]}function handleDisabledElement$1(e){true===this.disabled&&stopEverything$1(e)}function ElementEnabler(){const e=[enableElement$1];let t=[];function initialize(){t=getQueries()}function connect(){addListeners(t,e)}function disconnect(){removeListeners(t,e)}function observerCallback(n){attachObserverCallback(t,n,e)}return{name:"ElementEnabler",initialize:initialize,connect:connect,disconnect:disconnect,observerCallback:observerCallback,callbacks:e}}function getQueries(){const{formSubmitSelector:e,buttonDisableSelector:t,linkDisableSelector:n,inputChangeSelector:r}=window.mrujs;const o=[n,t,e,r];return[{event:b.ajaxComplete,selectors:o},{event:b.ajaxStopped,selectors:o},{event:"turbo:submit-end",selectors:o}]}function enableElement$1(e){let t=e;e instanceof Event&&(t=e.target);const{linkDisableSelector:n,buttonDisableSelector:r,formEnableSelector:o,formSubmitSelector:i}=window.mrujs;matches$1(t,n)?enableLinkElement(t):matches$1(t,r)||matches$1(t,o)?enableFormElement(t):matches$1(t,i)&&enableFormElements(t)}function enableLinkElement(e){const t=e.dataset.ujsEnableWith;if(null!=t){e.innerHTML=t;e.removeAttribute("data-ujs-enable-with")}e.removeEventListener("click",stopEverything$1);e.removeAttribute("data-ujs-disabled")}function enableFormElements(e){const t=formElements$1(e,window.mrujs.formEnableSelector);t.forEach(enableFormElement)}function enableFormElement(e){const t=e.dataset.ujsEnableWith;if(null!=t){matches$1(e,"button")?e.innerHTML=t:e.value=t;e.removeAttribute("data-ujs-enable-with")}e.disabled=false;e.removeAttribute("data-ujs-disabled")}function AddedNodesObserver(e){const t=new MutationObserver(e);function connect(){t.observe(document,{childList:true,subtree:true,attributes:true})}function disconnect(){t.disconnect()}return{name:"AddedNodesObserver",connect:connect,disconnect:disconnect}}function Mrujs(e={}){var t;e.connected=false;e={...m};e.FetchResponse=FetchResponse$1;e.FetchRequest=FetchRequest$1;e.addedNodesObserver=AddedNodesObserver(addedNodesCallback);e.remoteWatcher=RemoteWatcher();e.elementEnabler=ElementEnabler();e.elementDisabler=ElementDisabler();e.disabledElementChecker=DisabledElementChecker();e.navigationAdapter=NavigationAdapter();e.clickHandler=ClickHandler();e.confirmClass=Confirm();e.csrf=Csrf();e.method=Method();e.formSubmitDispatcher=FormSubmitDispatcher();const n=[e.addedNodesObserver,e.remoteWatcher,e.csrf,e.elementEnabler,e.clickHandler,e.disabledElementChecker,e.confirmClass,e.elementDisabler,e.method,e.formSubmitDispatcher,e.navigationAdapter];e.corePlugins=n;const r=null!==(t=e.plugins)&&void 0!==t?t:[];e.plugins=r;const o=n.concat(r);e.allPlugins=o;e.maskLinkMethods=true;e.mimeTypes={...v};e.stop=stop;e.restart=restart;e.fetch=fetch;e.urlEncodeFormData=urlEncodeFormData;e.registerMimeTypes=registerMimeTypes;e.enableElement=enableElement$1;e.enableFormElements=enableFormElements;e.enableFormElement=enableFormElement;e.disableElement=disableElement$1;e.stopEverything=stopEverything$1;e.dispatch=dispatch;e.addListeners=addListeners;e.removeListeners=removeListeners;e.attachObserverCallback=attachObserverCallback;e.expandUrl=expandUrl;e.findSubmitter=findSubmitter;e.$=$$1;e.CSRFProtection=CSRFProtection$1;e.csrfParam=csrfParam$1;e.csrfToken=csrfToken$1;e.cspNonce=cspNonce$1;e.confirm=confirm$1;e.handleConfirm=handleConfirm$1;e.handleDisabledElement=handleDisabledElement$1;e.handleMethod=handleMethod$1;e.start=start$1;e.preventInsignificantClick=preventInsignificantClick$1;e.refreshCSRFTokens=refreshCSRFTokens$1;e.delegate=delegate$1;e.fire=fire$1;e.formElements=formElements$1;e.matches=matches$1;e.toArray=toArray;e.prefetch=e.navigationAdapter.prefetch;return e}function start$1(e={}){var t;window.Rails=window.mrujs=this;if(window.mrujs.connected)return window.mrujs;Object.assign(this,e);this.allPlugins=this.corePlugins.concat(this.plugins);for(let e=0;e<this.allPlugins.length;e++){const n=this.allPlugins[e];null===(t=n.initialize)||void 0===t?void 0:t.call(n)}connect();return this}function stop(){disconnect()}function restart(){disconnect();connect()}function connect(){var e;reEnableDisabledElements();window.addEventListener("pageshow",reEnableDisabledElements);for(let t=0;t<window.mrujs.allPlugins.length;t++){const n=window.mrujs.allPlugins[t];null===(e=n.connect)||void 0===e?void 0:e.call(n)}window.mrujs.connected=true}function disconnect(){var e;window.removeEventListener("pageshow",reEnableDisabledElements);for(let t=0;t<window.mrujs.allPlugins.length;t++){const n=window.mrujs.allPlugins[t];null===(e=n.disconnect)||void 0===e?void 0:e.call(n)}window.mrujs.connected=false}function confirm$1(e){return window.confirm(e)}function addedNodesCallback(e,t){for(const t of e){let e;e="attributes"===t.type?[t.target]:Array.from(t.addedNodes);window.setTimeout((()=>{var t;for(let n=0;n<window.mrujs.allPlugins.length;n++){const r=window.mrujs.allPlugins[n];null===(t=r.observerCallback)||void 0===t?void 0:t.call(r,e)}}),0)}}function fetch(e,t={}){let{element:n,submitter:r,dispatchEvents:o}=t;delete t.element;delete t.submitter;delete t.dispatchEvents;const i=FetchRequest$1(e,t);if(true!==o)return window.fetch(i.request);null==n&&(n=document.documentElement);dispatch.call(n,b.ajaxBeforeSend,{detail:{element:n,fetchRequest:i,request:i.request,submitter:r}})}function registerMimeTypes(e){e.forEach((e=>{const{shortcut:t,header:n}=e;window.mrujs.mimeTypes[t]=n}));return window.mrujs.mimeTypes}function reEnableDisabledElements(){const{formEnableSelector:e,linkDisableSelector:t}=window.mrujs;$$1(`${e}, ${t}`).forEach((e=>{const t=e;enableElement$1(t)}))}function cspNonce$1(){return getMetaContent("csp-nonce")}const E=Mrujs();const{$:$,CSRFProtection:S,buttonClickSelector:w,buttonDisableSelector:C,cspNonce:k,csrfParam:j,csrfToken:y,confirm:R,delegate:T,disableElement:F,enableElement:q,fileInputSelector:x,fire:L,formDisableSelector:A,formElements:D,formEnableSelector:M,formInputClickSelector:H,formSubmitSelector:P,handleConfirm:N,handleDisabledElement:O,handleMethod:U,inputChangeSelector:I,linkClickSelector:z,linkDisableSelector:B,matches:W,preventInsignificantClick:Q,refreshCSRFTokens:G,start:V,stopEverything:K,FetchResponse:J,FetchRequest:X}=E;export{$,S as CSRFProtection,X as FetchRequest,J as FetchResponse,Mrujs,w as buttonClickSelector,C as buttonDisableSelector,R as confirm,k as cspNonce,j as csrfParam,y as csrfToken,E as default,T as delegate,F as disableElement,q as enableElement,x as fileInputSelector,L as fire,A as formDisableSelector,D as formElements,M as formEnableSelector,H as formInputClickSelector,P as formSubmitSelector,N as handleConfirm,O as handleDisabledElement,U as handleMethod,I as inputChangeSelector,z as linkClickSelector,B as linkDisableSelector,W as matches,E as mrujs,Q as preventInsignificantClick,G as refreshCSRFTokens,V as start,K as stopEverything};

